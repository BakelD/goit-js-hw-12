{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '27888525-8999ed18604edf74585499e22';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const fetchImages = (query, currentPage) => {\n  const searchParams = {\n    key: API_KEY,\n    q: query,\n    page: currentPage,\n    per_page: 15,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  };\n\n  try {\n    return axios.get('', { params: searchParams });\n  } catch (error) {\n    console.log(error.message);\n  }\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst getMarkUp = ({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) =>\n  ` <li class=\"gallery-item\">\n        <div class=\"gallery-thumb\"><a class=\"gallery-link\" href=\"${largeImageURL}\" ><img src=\"${webformatURL}\" alt=\"${tags}\"/></a></div>\n        <div class=\"gallery-info-wrapper\">\n          <div class=\"gallery-info-box\">\n            <span class=\"gallery-info-data\">Likes</span>\n            <span class=\"gallery-info-amount\">${likes}</span>\n          </div>\n          <div class=\"gallery-info-box\">\n            <span class=\"gallery-info-data\">Views</span>\n            <span class=\"gallery-info-amount\">${views}</span>\n          </div>\n          <div class=\"gallery-info-box\">\n            <span class=\"gallery-info-data\">Comments</span>\n            <span class=\"gallery-info-amount\">${comments}</span>\n          </div>\n          <div class=\"gallery-info-box\">\n            <span class=\"gallery-info-data\">Downloads</span>\n            <span class=\"gallery-info-amount\">${downloads}</span>\n          </div>\n        </div>\n      </li>`;\n\nexport const renderMarkUp = items =>\n  items.map(item => getMarkUp(item)).join('');\n\nexport const simpleLightbox = new SimpleLightbox('.gallery-link');\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchImages } from './js/pixabay-api';\nimport { renderMarkUp, simpleLightbox } from './js/render-functions';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  gallerylist: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  btnLoadMore: document.querySelector('.btn-load-more'),\n};\n\nconst itemsPerPage = 15;\nlet totalPages;\nlet currentPage;\nlet query;\n\nrefs.form.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  currentPage = 1;\n  refs.gallerylist.innerHTML = '';\n  refs.loader.classList.add('is-visible');\n\n  query = e.target.elements['search-text'].value.trim();\n\n  if (!query) {\n    iziToast.error({\n      message: 'Please fill out the request!',\n      position: 'topRight',\n    });\n\n    refs.loader.classList.remove('is-visible');\n    refs.btnLoadMore.classList.remove('is-visible');\n    e.target.elements['search-text'].value = '';\n\n    return;\n  }\n\n  try {\n    const {\n      data: { hits: images },\n    } = await fetchImages(query, currentPage);\n\n    if (!images.length) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n\n      refs.loader.classList.remove('is-visible');\n      refs.btnLoadMore.classList.remove('is-visible');\n      e.target.elements['search-text'].value = '';\n      return;\n    }\n\n    refs.loader.classList.remove('is-visible');\n    refs.gallerylist.innerHTML = renderMarkUp(images);\n    simpleLightbox.refresh();\n    e.target.elements['search-text'].value = '';\n    currentPage += 1;\n\n    refs.btnLoadMore.classList.add('is-visible');\n\n    const elemHeight = document\n      .querySelector('.gallery-item')\n      .getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: elemHeight * 2, // Scroll down by 2 times the element height\n      left: 0,\n      behavior: 'smooth', // Smooth scrolling\n    });\n  } catch (error) {\n    iziToast.error({\n      message: error.message,\n      position: 'topRight',\n    });\n  }\n});\n\nrefs.btnLoadMore.addEventListener('click', async () => {\n  try {\n    const {\n      data: { totalHits, hits: images },\n    } = await fetchImages(query, currentPage);\n\n    refs.loader.classList.remove('is-visible');\n    refs.gallerylist.insertAdjacentHTML('beforeend', renderMarkUp(images));\n    simpleLightbox.refresh();\n\n    totalPages = Math.ceil(totalHits / itemsPerPage);\n\n    if (currentPage === totalPages) {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n\n      refs.btnLoadMore.classList.remove('is-visible');\n      return;\n    }\n\n    currentPage += 1;\n    refs.btnLoadMore.classList.add('is-visible');\n  } catch (error) {\n    iziToast.error({\n      message: error.message,\n      position: 'topRight',\n    });\n\n    console.log(error.message);\n  }\n});\n"],"names":["API_KEY","axios","fetchImages","query","currentPage","searchParams","error","getMarkUp","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderMarkUp","items","item","simpleLightbox","SimpleLightbox","refs","itemsPerPage","totalPages","iziToast","images","elemHeight","totalHits"],"mappings":"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"}